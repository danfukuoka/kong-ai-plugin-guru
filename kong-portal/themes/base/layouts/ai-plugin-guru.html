{% layout = "layouts/_page.html" %}

{-content-}
<div class="container">
    <h3>AI Plugin Guru</h3>
    
    <!-- Text Area for Input -->
    <label for="pluginInput">What do you need the plugin to do?</label>
    <textarea id="pluginInput" rows="4" cols="124"></textarea>

    <!-- Button to Submit -->
    <button id="submitButton">Submit</button>

    <!-- Text Area for Response -->
    <label for="response">Declarative Kong:</label>
    <textarea id="response" rows="30" cols="124" readonly></textarea>

    <!-- JavaScript (Optional) -->
    <script>
        // JavaScript code can be added here for interactivity.
        // For example, you can use JavaScript to handle button clicks and display responses.
        document.getElementById("submitButton").addEventListener("click", function() {
            // Get the input from the text area
            var userInput = document.getElementById("pluginInput").value;

            // Display "Processing" in the response textarea
            document.getElementById("response").value = "Processing...";

            // Create a new XMLHttpRequest object
            var xhr = new XMLHttpRequest();

            // Configure the request
            xhr.open("POST", "http://localhost:8080", true);
            xhr.setRequestHeader("Content-Type", "text/plain"); // Set the content type to plain text

            // Define a callback function to handle the response
            xhr.onreadystatechange = function() {
                if (xhr.readyState === 4) {
                    if (xhr.status === 200) {
                        // Handle the successful response here
                        document.getElementById("response").value = xhr.responseText;
                    } else {
                        // Handle errors here
                        document.getElementById("response").value = "Error: " + xhr.status;
                    }
                }
            };

            // Send the request with the user input as the request body
            xhr.send(userInput);
        });
    </script>
</div>

<style>
    h3 {
        margin: 25px 0 25px 0;
    }
    #submitButton {
        float: right;
    }
    textarea {
        margin: 25px 0 25px 0;
        height: auto;
    }
</style>

{-content-}
